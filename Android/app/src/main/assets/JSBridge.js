"use strict";!function(e,t){function n(e){h=e}function i(e,t){B[e]=t}function o(e){B[e]&&delete B[e]}function s(e,t,n){console.log("[send]eventName:"+e+", data: "+JSON.stringify(t));var i={};if(i[_]=N,e&&(i[y]=e),t&&(i[A]=t),n){var o="js_cb_"+k++ +"_"+(new Date).getTime();F[o]=n,i[p]=o}g(i)}function a(e,t,n){var i={};i[_]=S,i[J]=e,i[p]=t,n&&(i[A]=n),g(i)}function c(){s("listAllEvents",null,function(e,t){console.log("Events: "+JSON.stringify(t.Events))})}function d(e){console.log("dispatchMessageFromNative: "+JSON.stringify(e)),setTimeout(function(){try{e.method==N?r(e):e.method==S&&l(e)}catch(e){console.log(e)}})}function r(e){console.log("handleMessageSentFromNative");var t=e.callbackId,n=B[e.eventName];return n?void n(e.data,function(e,n){t&&a(e,t,n)}):void h(e)}function l(e){console.log("handleMessageCallbackFromNative");var t=e.callbackId;if(void 0!==t){var n=F[t];n&&n(e.code,e.data)}}function g(e){T.push(e),u()}function u(){if(M)f.src=m+"://"+E+b;else try{AndroidAPI.dispatchMessageQueueFromJS(v())}catch(e){console.log(e)}}function v(){try{var e=T;T=[];var t=JSON.stringify(e);return console.log("[fetchMessageQueue] messages: "+t),t}catch(e){console.log(e)}return[]}if(!e.JSBridge){var f,h,m="torlaxbridge",E="__TORLAX_HOST__",b="/__TORLAX_EVENT__",N="SEND",S="CALLBACK",_="method",y="eventName",A="data",J="code",p="callbackId",O=navigator.userAgent,M=/i(Phone|Pod|Pad|OS)/g.test(O),T=(/Android/g.test(O),[]),B={},F={},k=1;e.JSBridge={init:n.bind(this),registerEvent:i.bind(this),unregisterEvent:o.bind(this),send:s.bind(this),dispatchMessageFromNative:d.bind(this),fetchMessageQueue:v.bind(this),listAllEvents:c.bind(this)},f=t.createElement("iframe"),f.style.display="none",u(),t.documentElement.appendChild(f);var C=t.createEvent("Events");C.initEvent("JSBridgeReady"),C.bridge=JSBridge,t.dispatchEvent(C)}}(window,document);